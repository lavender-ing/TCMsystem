{"ast":null,"code":"import * as echarts from 'echarts';\nimport debounce from \"lodash/debounce\";\nimport { addListener, removeListener } from \"resize-detector\";\nexport default {\n  props: {\n    option: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  watch: {\n    // option(val) {\n    //   this.chart.setOption(val);\n    // },\n    option: {\n      handler(val) {\n        this.chart.setOption(val);\n      },\n      deep: true\n    }\n  },\n  created() {\n    this.resize = debounce(this.resize, 300);\n  },\n  mounted() {\n    this.renderChart();\n    addListener(this.$refs.chartDom, this.resize);\n  },\n  beforeDestroy() {\n    removeListener(this.$refs.chartDom, this.resize);\n    this.chart.dispose();\n    this.chart = null;\n  },\n  methods: {\n    resize() {\n      this.chart.resize();\n    },\n    renderChart() {\n      this.chart = echarts.init(this.$refs.chartDom);\n      this.chart.setOption(this.option);\n    }\n  }\n};","map":{"version":3,"names":["echarts","debounce","addListener","removeListener","props","option","type","Object","default","watch","handler","val","chart","setOption","deep","created","resize","mounted","renderChart","$refs","chartDom","beforeDestroy","dispose","methods","init"],"sources":["src/components/Echarts/index.vue"],"sourcesContent":["<template>\r\n  <div ref=\"chartDom\" ></div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\nimport debounce from \"lodash/debounce\";\r\nimport { addListener, removeListener} from \"resize-detector\";\r\n\r\nexport default {\r\n  props: {\r\n    option: {\r\n      type: Object,\r\n      default: ()=> {}\r\n    }\r\n  },\r\n  watch: {\r\n    // option(val) {\r\n    //   this.chart.setOption(val);\r\n    // },\r\n    option: {\r\n      handler(val) {\r\n        this.chart.setOption(val);\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  created() {\r\n    this.resize = debounce(this.resize, 300);\r\n  },\r\n  mounted() {\r\n    this.renderChart();\r\n    addListener(this.$refs.chartDom, this.resize);\r\n  },\r\n  beforeDestroy() {\r\n    removeListener(this.$refs.chartDom, this.resize);\r\n    this.chart.dispose();\r\n    this.chart = null;\r\n  },\r\n  methods:{\r\n    resize(){\r\n      this.chart.resize();\r\n    },\r\n    renderChart() {\r\n      this.chart = echarts.init(this.$refs.chartDom);\r\n      this.chart.setOption(this.option);\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"mappings":"AAKA,YAAAA,OAAA;AACA,OAAAC,QAAA;AACA,SAAAC,WAAA,EAAAC,cAAA;AAEA;EACAC,KAAA;IACAC,MAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,EAAAA,CAAA;IACA;EACA;EACAC,KAAA;IACA;IACA;IACA;IACAJ,MAAA;MACAK,QAAAC,GAAA;QACA,KAAAC,KAAA,CAAAC,SAAA,CAAAF,GAAA;MACA;MACAG,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,MAAA,GAAAf,QAAA,MAAAe,MAAA;EACA;EACAC,QAAA;IACA,KAAAC,WAAA;IACAhB,WAAA,MAAAiB,KAAA,CAAAC,QAAA,OAAAJ,MAAA;EACA;EACAK,cAAA;IACAlB,cAAA,MAAAgB,KAAA,CAAAC,QAAA,OAAAJ,MAAA;IACA,KAAAJ,KAAA,CAAAU,OAAA;IACA,KAAAV,KAAA;EACA;EACAW,OAAA;IACAP,OAAA;MACA,KAAAJ,KAAA,CAAAI,MAAA;IACA;IACAE,YAAA;MACA,KAAAN,KAAA,GAAAZ,OAAA,CAAAwB,IAAA,MAAAL,KAAA,CAAAC,QAAA;MACA,KAAAR,KAAA,CAAAC,SAAA,MAAAR,MAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}